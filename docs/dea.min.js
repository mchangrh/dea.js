let serverEndpoint="https://sponsor.ajay.app",thumbEndpoint="https://dearrow-thumb.ajay.app",normalization="NFKC",transform="lowercase",imgfilter="blur(5px)";const validate_config=()=>{["NFC","NFD","NFKC","NFKD"].includes(normalization)||(console.warn("Invalid normalization value, defaulting to NFC"),normalization="NFC")},VERSION=(validate_config(),"1.0.0"),replace=()=>[...document.querySelectorAll("ytd-compact-video-renderer,ytd-rich-item-renderer:not(.dea-js)")].slice(0,50).forEach(replaceElem),basicFormatter=(e,t=!1)=>t?e.replace(/>/g,""):e.normalize(normalization),replaceElem=async e=>{var t,a,n,o;e.classList.contains("dea-js")||(n=e?.polymerController?.__data?.data?.videoId??e?.polymerController?.__data?.data?.content?.videoRenderer?.videoId)&&({title:t,has_thumb:o}=await getDeaVideo(n),n=thumbEndpoint+"/api/v1/getThumbnail?videoID="+n,(a=e.querySelector("yt-image img")).src?a.src=n:a.lazyData.sources=[{url:n,width:720,height:404}],o||(a.style.filter=imgfilter),n=e.querySelector("#video-title"),o=basicFormatter(t?"ðŸ§¿"+t:n.innerText,!!t),n.innerText=o,t||(n.style.textTransform=transform),a)&&n&&e.classList.add("dea-js")},getDeaVideo=async e=>fetch(serverEndpoint+"/api/branding?videoID="+e).then(e=>e.json()).then(e=>({title:e.titles?.[0]?.title,has_thumb:Boolean(e.thumbnails.length)}));function setup(){if(console.log(`@mchangrh/DEA.js ${VERSION} Loaded`),console.log("Uses SponsorBlock data licensed used under CC BY-NC-SA 4.0 from https://sponsor.ajay.app/"),document.querySelector(".cbTitleButtonContainer"))return console.log("[DEA.js] Extension Present, Exiting");replace(),document.addEventListener("yt-navigate-finish",replace),window.addEventListener("scroll",replace)}